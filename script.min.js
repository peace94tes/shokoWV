async function init() {
    const video = document.querySelector("#video");
    const currentLocation = window.location.search;
    const sURL = currentLocation.replace("?url=", "");
    const ui = video["ui"];
    const config = {
        'controlPanelElements': ['play_pause','time_and_duration','spacer','mute','volume','captions','language' ,'quality','fullscreen'],
        'playbackRates': [0.5, 0.75, 1, 1.25, 1.5, 1.75, 2],
        'seekBarColors': {base: 'rgba(32,178,169,255)', buffered: 'rgba(255,255,255,.9)', played: 'rgb(255,0,0)'},
        'volumeBarColors': {base: 'rgba(255, 255, 255, .4)', level: 'rgba(255,255,255,.9)'}};
    ui.configure(config);
    const controls = ui.getControls();
    const player = controls.getPlayer();

var QWERTYUIOP = {
      clearKeys: {
        // 'key-id-in-hex': 'key-in-hex',
"002046c9a49b9ab1cdb6616bec5d26c3":"d2f92f6b7edc9a1a05d393ba0c20ef9e", //PEACOCKPLPEACOCKTVCOM
"232d71bb013d39ffb92ee8c576fb7e8e":"087408a48be8d57046c3868b37ea90ba", //UNIVERSOPEACOCKTVCOM
"e1f756cffcc838e28a3da6541c00ee8b":"1444b1c17a5c1f78435de12dcff47c8e", //TELEMUNDOPEACOCKTVCOM
"0045a118e231f1326bcdb45350b1ceaa":"8c13afbfa54ea37a368b8b859021f6e3", //NBCPEACOCKTVCOM
"0020d88a6713159839743f655c5da7de":"ba9f34226301f69a4f0f13f65a1f92ec", //NBCSPORTSPEACOCKTVCOM
"252a671825ba31ec8433f978c32ccf6d":"ee560759ecc8d2274df2e63fcef56915", //USAWESTPEACOCKTVCOM
"3ca2eb502e8746168c77ad9a506bb293":"342972045bddbc97f43cc3c841cdc6b9", //USAEASTPEACOCKTVCOM
"c18b6aa739be4c0b774605fcfb5d6b68":"e41c3a6f7532b2e3a828d9580124c89d", //ARENABHATELECOMBA
"ae26845bd33038a9c0774a0981007294":"63ac662dde310cfb4cc6f9b43b34196d", //TNT1AIV-CDNNET
"6d1708b185c6c4d7b37600520c7cc93c":"1aace05f58d8edef9697fd52cb09f441", //TNT2AIV-CDNNET
"4e993aa8c1f295f8b94e8e9e6f6d0bfe":"86a1ed6e96caab8eb1009fe530d2cf4f", //TNT3AIV-CDN.NET
"e31a5a81caff5d07ea2411a571fc2e59":"96c5ef69479732ae734f962748c19729", //TNT4AIV-CDNNET
"60c0d9b41475e01db4ffb91ed557fbcc":"36ee40e58948ca15e3caba8d47b8f34b", //TNT5AIV-CDNNET
"43d1c3b25207ff38b22ccfe17d302367":"7b1f85f6e81059473b114c16a25c829a", //DAZNLALIGAAIV-CDNNET
"44dd9cd370b08a868ead115fe84ecfde":"bff19ab0a51cf14e848389b152913fd0", //DAZNES1AIV-CDNNET
"0eab5a3f3e3b4ba5d42d40ca30d17571":"f3f061ded9b70e8160590d5802ecda6d", //DAZNES2AIV-CDNNET
"8ab47741930c476780515f9a00decb0a":"7ab4b9ae5a48aa526e511a913b832769", //DCFFSDAZNCOM
"cfb5e2b73bef4f3c878f25ab86a7451f":"0d6712bf2a84edcc93d001a9613f6fec", //DCJAKAKAMAIZEDNETDAZN          
"e60ece8f0d9042fcb52508055ec48e5e":"213f438bd4961cda987d41b7f154f1e5", //SPOTV1SYSLNID
"e6ed3fdf6e9f491d9ead109fc0b00cfc":"3bc6c45722eb5fa7b343de9bffc4f7c7", //SPOTV2SYSLNID
"b4899559135b490d98a892c1d6a45e20":"6b5feff6a7242dc4b4345bedb84c2181", //ANTVSYSLNID        
"052861ebedab473089d0e7480d0c5b63":"4d51aa0304af98c449fdec1548a199f9", //MOJISYSLNID
"5eaddccd893a47ac8b65f9b31963a3ae":"881afa67ea57b41c1822d745d67559e6", //INDOSIARSYSLNID
"a79a188263724bfcaafc4a7c3b3cd8ce":"4d4732d93e6720de0ef884d7106e14f7", //SCTVSYSLNID
"828e0aba9825c3546a2831e4c0c36f7f":"f85d3dcd38981368ab3da597e97ebdcc", //MNCTVMNCNOWID
"9ba3e153ef8956d6e2b0684fcf74f58f":"dbc28cb5c6426080f984a5b6d436bb30", //RCTIMNCNOWID
"88f6c7cbd793374cb5f12d7e26dcd63b":"e82daa7c7bfb03d99327463fdbd37336", //GTVMNCNOWID
"531c6d50e3e9f9ba66446f624f492289":"d769d9ae238bdd424f8bcdcdc9a3801f", //STARSPORT1MNCNOWID
"45fec91ce1f19b6b1f31d69dcfaaf6cd":"843e228ab109e9aa6c4822ee4ad05d7d", //STARSPORT2MNCNOWID
"fadd2720deff5925ab86df0819cd7775":"f67ff08c7ebc779f6a6fcfc83835f65b", //STARSPORT3MNCNOWID
"b81b1942c65f35547ced1bff074206a5":"a07dc4d86f51db7195f4b7e2abe9d9e8", //STARSPORT4MNCNOWID
"57d2ac9210cfbca3596cc679a01c8b29":"d5e35c0f39c76adf24853d7ea18c71e7", //BEINMNCNOWID
"e60ece8f0d9042fcb52508055ec48e5e":"213f438bd4961cda987d41b7f154f1e5", //SPOTV1MNCNOWID
"e6ed3fdf6e9f491d9ead109fc0b00cfc":"3bc6c45722eb5fa7b343de9bffc4f7c7", //SPOTV2MNCNOWID
"4d38060bf41b3c29df0ec950ece6b5da":"7ee9506b13480491d79b71c062ab5366" //SOCCERMNCNOWID          
}
        };
  

    
player.configure({
    streaming: {
    lowLatencyMode: true,
    inaccurateManifestTolerance: 0,
    rebufferingGoal: 0.01,
    segmentPrefetchLimit: 2,
    updateIntervalSeconds: 0.1,
    maxDisabledTime: 1,
    retryParameters: {
      baseDelay: 100,
    },
  },
    drm: ASDFGHJKL, QWERTYUIOP
  });
//player.configure({
    //drm: {
        //servers: ASDFGHJKL,
        //clearKeys: QWERTYUIOP 
      //}
  //});

    window.player = player;
    window.ui = ui;
    player.addEventListener("error", onPlayerErrorEvent);
    controls.addEventListener("error", onUIErrorEvent);
    try {
      await player.load(sURL);
      console.log("The video has now been loaded!");
    } catch (error) {
      onPlayerError(error);
    }
  }

  function initApp() {
    shaka.polyfill.installAll();
    if (shaka.Player.isBrowserSupported()) {

   init();
    } else {
      console.error('Browser not supported!');
    }
  }

  function onPlayerErrorEvent(errorEvent) {
    onPlayerError(event.detail);
  }

  function onPlayerError(error) {
    console.error("Error code", error.code, "object", error);
  }

  function onUIErrorEvent(errorEvent) {
    onPlayerError(event.detail);
  }

  function initFailed(errorEvent) {
    console.error("Unable to load the UI library!");
  }
  document.addEventListener("shaka-ui-loaded", init);
  document.addEventListener("shaka-ui-load-failed", initFailed);
